---
/**
 * Pagination Component - Paginación de tablas
 */
interface Props {
  currentPage: number;
  totalPages: number;
  totalItems: number;
  itemsPerPage: number;
  baseUrl: string;
}

const { 
  currentPage, 
  totalPages, 
  totalItems,
  itemsPerPage,
  baseUrl 
} = Astro.props;

const startItem = (currentPage - 1) * itemsPerPage + 1;
const endItem = Math.min(currentPage * itemsPerPage, totalItems);

// Generar páginas visibles
const getVisiblePages = () => {
  const pages: (number | 'ellipsis')[] = [];
  const delta = 2;
  
  for (let i = 1; i <= totalPages; i++) {
    if (
      i === 1 ||
      i === totalPages ||
      (i >= currentPage - delta && i <= currentPage + delta)
    ) {
      pages.push(i);
    } else if (pages[pages.length - 1] !== 'ellipsis') {
      pages.push('ellipsis');
    }
  }
  
  return pages;
};

const visiblePages = getVisiblePages();
---

{totalPages > 1 && (
  <div class="flex items-center justify-between py-4 border-t border-gray-200">
    <!-- Info -->
    <p class="text-sm text-gray-600">
      Mostrando <span class="font-medium">{startItem}</span> a <span class="font-medium">{endItem}</span> de <span class="font-medium">{totalItems}</span> resultados
    </p>
    
    <!-- Controles -->
    <nav class="flex items-center gap-1">
      <!-- Anterior -->
      <a
        href={currentPage > 1 ? `${baseUrl}?page=${currentPage - 1}` : '#'}
        class:list={[
          "flex items-center justify-center w-9 h-9 rounded-lg transition-colors",
          currentPage > 1 
            ? "text-gray-600 hover:bg-gray-100" 
            : "text-gray-300 cursor-not-allowed pointer-events-none"
        ]}
      >
        <span class="material-symbols-outlined text-lg">chevron_left</span>
      </a>
      
      <!-- Páginas -->
      {visiblePages.map((page) => (
        page === 'ellipsis' ? (
          <span class="w-9 h-9 flex items-center justify-center text-gray-400">...</span>
        ) : (
          <a
            href={`${baseUrl}?page=${page}`}
            class:list={[
              "flex items-center justify-center w-9 h-9 rounded-lg text-sm font-medium transition-colors",
              page === currentPage
                ? "bg-blue-600 text-white"
                : "text-gray-600 hover:bg-gray-100"
            ]}
          >
            {page}
          </a>
        )
      ))}
      
      <!-- Siguiente -->
      <a
        href={currentPage < totalPages ? `${baseUrl}?page=${currentPage + 1}` : '#'}
        class:list={[
          "flex items-center justify-center w-9 h-9 rounded-lg transition-colors",
          currentPage < totalPages 
            ? "text-gray-600 hover:bg-gray-100" 
            : "text-gray-300 cursor-not-allowed pointer-events-none"
        ]}
      >
        <span class="material-symbols-outlined text-lg">chevron_right</span>
      </a>
    </nav>
  </div>
)}
