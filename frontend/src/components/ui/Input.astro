---
interface Props extends astroHTML.JSX.InputHTMLAttributes {
  label?: string;
  error?: string;
  icon?: string;
  helperText?: string;
}

const { 
  label, 
  error, 
  icon,
  helperText,
  id,
  class: className,
  ...rest 
} = Astro.props;

const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;
---

<div class:list={["w-full", className]}>
  {label && (
    <label for={inputId} class="block text-sm font-medium text-gray-700 mb-1">
      {label}
    </label>
  )}
  
  <div class="relative">
    {icon && (
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <span class="material-symbols-outlined text-gray-400 text-lg">{icon}</span>
      </div>
    )}
    
    <input
      id={inputId}
      class:list={[
        "block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm transition-colors duration-200",
        icon ? "pl-10" : "pl-3",
        error ? "border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500" : ""
      ]}
      {...rest}
    />
  </div>

  {error && (
    <p class="mt-1 text-sm text-red-600 flex items-center">
      <span class="material-symbols-outlined text-sm mr-1">error</span>
      {error}
    </p>
  )}
  
  {!error && helperText && (
    <p class="mt-1 text-sm text-gray-500">{helperText}</p>
  )}
</div>
